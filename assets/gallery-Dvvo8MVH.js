const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YunGallery-Cm9mGJej.js","assets/app-DghEkXbc.js","assets/app-D_MboR8j.css","assets/YunPageHeader.vue_vue_type_script_setup_true_lang-CoQ6p90e.js"])))=>i.map(i=>d[i]);
import{H as D,d as w,M as C,o as c,c as v,i as g,b as h,g as r,a6 as $,a7 as S,S as V,a8 as B,m as i,u as E,O as K,J as O,U as Y,Y as G,Z as T,D as F,a9 as M,aa as R,w as f,$ as U,f as a,t as j,F as L,a0 as H,a1 as I,q as N,ab as z}from"./app-DghEkXbc.js";import{_ as J}from"./YunPageHeader.vue_vue_type_script_setup_true_lang-CoQ6p90e.js";function W(s){const o=new TextEncoder;return window.crypto.subtle.importKey("raw",o.encode(s),"PBKDF2",!1,["deriveBits","deriveKey"])}function q(s,o){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}function Z(){const s=D(),{encrypt:o}=s.value,n=Uint8Array.from(Object.values(o.iv)),e=Uint8Array.from(Object.values(o.salt));return{decrypt:async(l,u)=>{if(!l)return;const d=await W(l),y=await q(d,e),p=Uint8Array.from(u,_=>_.charCodeAt(0)),t=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:n},y,p);return new TextDecoder().decode(t)}}}const Q=w({__name:"YunGallery",props:{photos:{}},setup(s){return(o,n)=>{const e=C("VAGallery");return c(),v(e,{photos:o.photos},null,8,["photos"])}}}),X={key:0,"w-full":"","pt-14":"","pb-10":""},ee={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},te={key:1},oe=w({__name:"ValaxyGalleryDecrypt",props:{encryptedPhotos:{}},setup(s){const o=s,n=g(""),e=g(""),l=g(!1),{decrypt:u}=Z();async function d(){const p=o.encryptedPhotos;if(p)try{const t=await u(n.value,p);e.value=t||""}catch{l.value=!0}}function y(){e.value="",n.value=""}return(p,t)=>{const _=Q;return c(),h("div",null,[e.value?(c(),h("div",te,[i(_,{photos:JSON.parse(e.value)},null,8,["photos"]),r("div",{"w-full":"","text-center":"","mt-8":""},[r("button",{"m-auto":"",class:"btn","font-bold":"",onClick:y}," Encrypt Again ")])])):(c(),h("div",X,[r("div",ee,[$(r("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),"w-full":"",border:"","pl-5":"","pr-11":"","py-3":"",rounded:"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:V(l.value&&"border-red"),onInput:t[1]||(t[1]=m=>l.value=!1),onKeyup:B(d,["enter"])},null,34),[[S,n.value]]),r("div",{"cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"","text-gray":"","hover:text-black":"",onClick:d})])]))])}}}),ne={text:"center",class:"yun-text-light",p:"2"},ae={class:"page-action",text:"center"},se=["title"],re=w({__name:"gallery",setup(s){const o=E(),{t:n}=K(),e=O(),l=Y(e);G([T({"@type":"CollectionPage"})]);const u=F(()=>e.value.photos||[]),y=M().value.addons["valaxy-addon-lightgallery"]?R(()=>z(()=>import("./YunGallery-Cm9mGJej.js"),__vite__mapDeps([0,1,2,3]))):()=>null;return(p,t)=>{const _=H,m=J,x=oe,b=C("RouterView"),k=I,A=N;return c(),h(L,null,[i(k,null,{default:f(()=>[i(_),i(b,null,{default:f(({Component:P})=>[(c(),v(U(P),null,{"main-header":f(()=>[i(m,{title:a(l)||a(n)("title.gallery"),icon:a(e).icon||"i-ri-gallery-line",color:a(e).color,"page-title-class":a(e).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":f(()=>[r("div",ne,j(a(n)("counter.photos",u.value.length)),1),r("div",ae,[r("a",{class:"yun-icon-btn",title:a(n)("accessibility.back"),onClick:t[0]||(t[0]=()=>a(o).back())},t[1]||(t[1]=[r("div",{"i-ri-arrow-go-back-line":""},null,-1)]),8,se)]),a(e).encryptedPhotos?(c(),v(x,{key:0,"encrypted-photos":a(e).encryptedPhotos},null,8,["encrypted-photos"])):(c(),v(a(y),{key:1,photos:u.value},null,8,["photos"])),i(b)]),_:2},1024))]),_:1})]),_:1}),i(A)],64)}}}),ie=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{Q as _,ie as g};
